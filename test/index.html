<!DOCTYPE html>
<html lang="en">
<head>
    <script>
        (function deny(config = {}) {
            const log = config.log || function() {}
            const allow = config.allow || function () { return false }

            const observer = new MutationObserver(function (records, observer) {
                for (const record of records) {
                    record.addedNodes.forEach(function (node) {
                        if (!(node instanceof HTMLScriptElement)) {
                            return
                        }

                        if (allow(node)) {
                            log('allowing script', node)
                            return
                        }

                        log('denying script', node)
                        node.remove()
                    })
                }
            })

            observer.observe(document, {
                subtree: true,
                childList: true,
            })
        })({ log: console.debug })
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test</title>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('textfield').value = 'No'
        })
    </script>
</head>
<body>
    <label>
        Scripts blocked?
        <input id="textfield" type="text" value="Yes" readonly>
    </label>
    <script>
        document.getElementById('textfield').value = 'Maybe not?'
    </script>
</body>
</html>
